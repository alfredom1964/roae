{"version":3,"sources":["webpack:///src/app/guards/login.guard.ts","webpack:///src/app/services/loader.service.ts","webpack:///src/environments/environment.ts","webpack:///src/app/interceptors/index.ts","webpack:///src/app/interceptors/auth.interceptor.ts","webpack:///src/app/app.component.ts","webpack:///src/app/guards/auth.guard.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/services/network.service.ts","webpack:///node_modules/@ionic/core/dist/esm lazy ^\\.\\/.*\\.entry\\.js$ include: \\.entry\\.js$ exclude: \\.system\\.entry\\.js$ namespace object","webpack:///src/app/services/auth.service.ts","webpack:///src/app/app-routing.module.ts","webpack:///src/main.ts","webpack:///$_lazy_route_resource lazy namespace object"],"names":["LoginGuardService","auth","getToken","providedIn","LoaderService","loaderCtrl","loader","message","dismiss","create","spinner","present","environment","production","url","constants","TOKEN_KEY","USER_KEY","httpInterceptorProviders","provide","useClass","multi","AuthInterceptor","storage","alertController","msg","alert","header","buttons","then","req","next","get","pipe","token","handle","authReq","clone","headers","set","err","status","error","ProgressEvent","showAlert","AppComponent","platform","splashScreen","statusBar","authService","router","network","initializeApp","listenNetworkChanges","ready","styleDefault","hide","navigateByUrl","selector","template","encapsulation","None","AuthGuardService","checkToken","jwtOptionsFactory","tokenGetter","whitelistedDomains","AppModule","declarations","entryComponents","imports","forRoot","jwtOptionsProvider","useFactory","deps","providers","bootstrap","NetworkService","networkConnection$","console","log","disconnectSubscription","onDisconnect","subscribe","connectSubscription","onConnect","setTimeout","unsubscribe","map","webpackAsyncContext","__webpack_require__","o","Promise","resolve","e","Error","code","ids","id","all","slice","keys","webpackAsyncContextKeys","Object","module","exports","AuthService","http","helper","plt","loadingController","toastController","sms","networkService","loaderService","usuario","clave","reportes","preguntas","listos","fecha","hora","authenticationState","init","loading","navigate","response","res","remove","credentials","post","show","result","TOKEN_NEW","toast","duration","JSON","stringify","value","reporteId","subscription","connection","reporte","postReporte","parse","request","msj","send","form","coords","formMeta","filter","_","index","key","usuarioId","fechahora","split","reportesSeleccion","reportesUnicoValor","includes","formData","respuestas","item","respuestasString","join","find","fuenteid","tipomensajeid","cuestid","sendReporte","openSms","number","link","document","createElement","href","click","routes","path","redirectTo","pathMatch","loadChildren","m","LoginPageModule","canActivate","InsidePageModule","ReportePageModule","TutorialModule","AboutModule","AppRoutingModule","bootstrapModule","webpackEmptyAsyncContext"],"mappings":"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","file":"main-es5.js","sourcesContent":["import { Injectable } from '@angular/core';\nimport { CanActivate } from '@angular/router';\nimport { Observable } from 'rxjs';\nimport { AuthService } from '../services/auth.service';\n \n@Injectable({\n  providedIn: 'root'\n})\nexport class LoginGuardService implements CanActivate {\n \n  constructor(public auth: AuthService) {}\n \n  canActivate(): Observable<boolean> {\n    return this.auth.getToken()\n  }\n}\n","import { Injectable } from \"@angular/core\";\nimport { LoadingController } from \"@ionic/angular\";\n\n@Injectable({\n  providedIn: \"root\",\n})\nexport class LoaderService {\n  private loader;\n  constructor(private loaderCtrl: LoadingController) {\n    this.loader = null;\n  }\n\n  async show(message?: string) {\n    if (this.loader !== null) {\n      this.loader.dismiss();\n      this.loader = null;\n    }\n\n    this.loader = await this.loaderCtrl.create({\n      spinner: \"crescent\",\n      message: message ? message : \"Cargando...\",\n    });\n    return this.loader.present();\n  }\n\n  hide() {\n    if (this.loader !== null) {\n      this.loader.dismiss();\n      this.loader = null;\n    }\n  }\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: true,\n  //url: 'https://thingproxy.freeboard.io/fetch/https://api.redobservacionae.org',\n  \n  url: 'https://api.redobservacionae.org',\n \n  constants: {\n    TOKEN_KEY: '',\n  USER_KEY: 'USER',\n  }\n  \n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n * \n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","/* \"Barrel\" of Http Interceptors */\nimport { HTTP_INTERCEPTORS } from '@angular/common/http';\n\nimport { AuthInterceptor } from './auth.interceptor';\n\n/** Http interceptor providers in outside-in order */\nexport const httpInterceptorProviders = [\n  { provide: HTTP_INTERCEPTORS, useClass: AuthInterceptor, multi: true },\n];","import { Injectable } from \"@angular/core\";\nimport { environment } from \"../../environments/environment\";\nimport {\n  HttpEvent,\n  HttpInterceptor,\n  HttpHandler,\n  HttpRequest,\n} from \"@angular/common/http\";\nimport { Storage } from \"@ionic/storage\";\nimport { from, Observable, of, throwError } from \"rxjs\";\nimport { catchError, switchMap } from \"rxjs/operators\";\nimport { AlertController } from \"@ionic/angular\";\nimport { createHostListener } from \"@angular/compiler/src/core\";\n\nconst { TOKEN_KEY } = environment.constants;\n\n/** Pass untouched request through to the next request handler. */\n@Injectable()\nexport class AuthInterceptor implements HttpInterceptor {\n  constructor(\n    private storage: Storage,\n    public alertController: AlertController\n  ) {}\n\n  showAlert(msg) {\n    let alert = this.alertController.create({\n      message: msg,\n      header: \"Error\",\n      buttons: [\"OK\"],\n    });\n    alert.then((alert) => alert.present());\n  }\n\n  intercept(\n    req: HttpRequest<any>,\n    next: HttpHandler\n  ): Observable<HttpEvent<any>> {\n    return from(this.storage.get(TOKEN_KEY)).pipe(\n      switchMap((token) => {\n        // Si no hay token pasamos la request directamente\n        if (!token) {\n          return next.handle(req);\n        }\n        // Si lo tenemos, clonamos la request, enchufamos el token en los headers y la pasamos al handler\n        const authReq = req.clone({\n          headers: req.headers.set(\"api_token\", token),\n        });\n        return next.handle(authReq);\n      }),\n      catchError((err) => {\n        if (err.status === 0 && err.error instanceof ProgressEvent) {\n          // A client-side or network error occurred. Handle it accordingly.\n          this.showAlert(\"Error con conexión intente mas tarde.\");\n        }\n        return throwError(err);\n      })\n    );\n  }\n}\n","import { Component, OnInit, ViewEncapsulation } from \"@angular/core\";\r\nimport { Platform } from \"@ionic/angular\";\r\nimport { SplashScreen } from \"@ionic-native/splash-screen/ngx\";\r\nimport { StatusBar } from \"@ionic-native/status-bar/ngx\";\r\nimport { AuthService } from \"./services/auth.service\";\r\nimport { Router } from \"@angular/router\";\r\nimport { Storage } from \"@ionic/storage\";\r\nimport { NetworkService } from \"./services/network.service\";\r\n\r\n@Component({\r\n  selector: \"app-root\",\r\n  templateUrl: \"app.component.html\",\r\n  encapsulation: ViewEncapsulation.None,\r\n})\r\nexport class AppComponent {\r\n  storage: any;\r\n  constructor(\r\n    private platform: Platform,\r\n    private splashScreen: SplashScreen,\r\n    private statusBar: StatusBar,\r\n    private authService: AuthService,\r\n    private router: Router,\r\n    private network: NetworkService\r\n  ) {\r\n    this.initializeApp();\r\n    this.network.listenNetworkChanges();\r\n  }\r\n\r\n  initializeApp() {\r\n    this.platform.ready().then(() => {\r\n      this.statusBar.styleDefault();\r\n      this.splashScreen.hide();\r\n    });\r\n  }\r\n\r\n  openTutorial() {\r\n    // this.menu.enable(false);\r\n    this.storage.set(\"ion_did_tutorial\", true);\r\n    this.router.navigateByUrl(\"/tutorial\");\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\nimport { CanActivate } from '@angular/router';\nimport { Observable } from 'rxjs';\nimport { AuthService } from '../services/auth.service';\n \n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthGuardService implements CanActivate {\n \n  constructor(public auth: AuthService) {}\n \n  canActivate(): Observable<boolean> {\n    return this.auth.checkToken()\n  }\n}\n","export default \"<ion-app>\\n  <ion-router-outlet></ion-router-outlet>\\n</ion-app>\\n\";","import { NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { RouteReuseStrategy } from '@angular/router';\n \nimport { IonicModule, IonicRouteStrategy } from '@ionic/angular';\nimport { SplashScreen } from '@ionic-native/splash-screen/ngx';\nimport { StatusBar } from '@ionic-native/status-bar/ngx';\n \nimport { AppComponent } from './app.component';\nimport { AppRoutingModule } from './app-routing.module';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms'; \n\nimport { HttpClientModule } from '@angular/common/http';\nimport { Storage } from '@ionic/storage';\nimport { IonicStorageModule } from '@ionic/storage-angular';\nimport { JwtModule, JWT_OPTIONS } from '@auth0/angular-jwt';\nimport { httpInterceptorProviders } from './interceptors/index'\nimport { AndroidPermissions } from '@ionic-native/android-permissions/ngx';\nimport { Geolocation } from '@ionic-native/geolocation/ngx';\nimport { NativeGeocoder } from '@ionic-native/native-geocoder/ngx';\n\nimport { SMS } from '@ionic-native/sms/ngx';\nimport { UniqueDeviceID } from '@ionic-native/unique-device-id/ngx';\nimport { Uid } from '@ionic-native/uid/ngx';\nimport { Network } from \"@ionic-native/network/ngx\";\n\n\n\nexport function jwtOptionsFactory(storage) {\n  return {\n    tokenGetter: () => {\n      return storage.get('access_token');\n    },\n    whitelistedDomains: ['localhost']\n  }\n}\n \n@NgModule({\n  declarations: [AppComponent],\n  entryComponents: [],\n  imports: [BrowserModule, FormsModule, ReactiveFormsModule, IonicModule.forRoot(), AppRoutingModule,\n  HttpClientModule,\n  IonicStorageModule.forRoot(),\n  JwtModule.forRoot({\n    jwtOptionsProvider: {\n      provide: JWT_OPTIONS,\n      useFactory: jwtOptionsFactory,\n      deps: [Storage],\n    }\n  })],\n  providers: [\n    StatusBar,\n    SplashScreen,\n    Geolocation,\n    NativeGeocoder,\n    UniqueDeviceID,SMS,\n    AndroidPermissions,\n    Uid,\n    { provide: RouteReuseStrategy, useClass: IonicRouteStrategy },\n    httpInterceptorProviders,\n    Network,\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule {}","import { Injectable, OnDestroy } from \"@angular/core\";\nimport { Network } from \"@ionic-native/network/ngx\";\nimport { BehaviorSubject, Subscription } from \"rxjs\";\n\n@Injectable({\n  providedIn: \"root\",\n})\nexport class NetworkService implements OnDestroy {\n  networkConnection$: BehaviorSubject<boolean> = new BehaviorSubject(true);\n\n  constructor(private network: Network) {}\n\n  listenNetworkChanges() {\n    console.log(\"Will listen to network changes!\");\n    this.disconnectSubscription = this.network.onDisconnect().subscribe(() => {\n      this.networkConnection$.next(false);\n    });\n    this.connectSubscription = this.network.onConnect().subscribe(() => {\n      setTimeout(() => {\n        // console.log(\"Network type\", this.network.type);\n        // if (this.network.type === \"wifi\") {\n          this.networkConnection$.next(true);\n        // }\n      }, 3000);\n    });\n  }\n\n  disconnectSubscription: Subscription;\n  connectSubscription: Subscription;\n\n  ngOnDestroy() {\n    this.disconnectSubscription.unsubscribe();\n    this.connectSubscription.unsubscribe();\n  }\n}\n","var map = {\n\t\"./ion-action-sheet.entry.js\": [\n\t\t\"dUtr\",\n\t\t\"common\",\n\t\t0\n\t],\n\t\"./ion-alert.entry.js\": [\n\t\t\"Q8AI\",\n\t\t\"common\",\n\t\t1\n\t],\n\t\"./ion-app_8.entry.js\": [\n\t\t\"hgI1\",\n\t\t\"common\",\n\t\t2\n\t],\n\t\"./ion-avatar_3.entry.js\": [\n\t\t\"CfoV\",\n\t\t\"common\",\n\t\t3\n\t],\n\t\"./ion-back-button.entry.js\": [\n\t\t\"Nt02\",\n\t\t\"common\",\n\t\t4\n\t],\n\t\"./ion-backdrop.entry.js\": [\n\t\t\"Q2Bp\",\n\t\t5\n\t],\n\t\"./ion-button_2.entry.js\": [\n\t\t\"0Pbj\",\n\t\t\"common\",\n\t\t6\n\t],\n\t\"./ion-card_5.entry.js\": [\n\t\t\"ydQj\",\n\t\t\"common\",\n\t\t7\n\t],\n\t\"./ion-checkbox.entry.js\": [\n\t\t\"4fMi\",\n\t\t\"common\",\n\t\t8\n\t],\n\t\"./ion-chip.entry.js\": [\n\t\t\"czK9\",\n\t\t\"common\",\n\t\t9\n\t],\n\t\"./ion-col_3.entry.js\": [\n\t\t\"/CAe\",\n\t\t10\n\t],\n\t\"./ion-datetime_3.entry.js\": [\n\t\t\"WgF3\",\n\t\t\"common\",\n\t\t11\n\t],\n\t\"./ion-fab_3.entry.js\": [\n\t\t\"uQcF\",\n\t\t\"common\",\n\t\t12\n\t],\n\t\"./ion-img.entry.js\": [\n\t\t\"wHD8\",\n\t\t13\n\t],\n\t\"./ion-infinite-scroll_2.entry.js\": [\n\t\t\"2lz6\",\n\t\t14\n\t],\n\t\"./ion-input.entry.js\": [\n\t\t\"ercB\",\n\t\t\"common\",\n\t\t15\n\t],\n\t\"./ion-item-option_3.entry.js\": [\n\t\t\"MGMP\",\n\t\t\"common\",\n\t\t16\n\t],\n\t\"./ion-item_8.entry.js\": [\n\t\t\"9bur\",\n\t\t\"common\",\n\t\t17\n\t],\n\t\"./ion-loading.entry.js\": [\n\t\t\"cABk\",\n\t\t\"common\",\n\t\t18\n\t],\n\t\"./ion-menu_3.entry.js\": [\n\t\t\"kyFE\",\n\t\t\"common\",\n\t\t19\n\t],\n\t\"./ion-modal.entry.js\": [\n\t\t\"TvZU\",\n\t\t\"common\",\n\t\t20\n\t],\n\t\"./ion-nav_2.entry.js\": [\n\t\t\"vnES\",\n\t\t\"common\",\n\t\t21\n\t],\n\t\"./ion-popover.entry.js\": [\n\t\t\"qCuA\",\n\t\t\"common\",\n\t\t22\n\t],\n\t\"./ion-progress-bar.entry.js\": [\n\t\t\"0tOe\",\n\t\t\"common\",\n\t\t23\n\t],\n\t\"./ion-radio_2.entry.js\": [\n\t\t\"h11V\",\n\t\t\"common\",\n\t\t24\n\t],\n\t\"./ion-range.entry.js\": [\n\t\t\"XGij\",\n\t\t\"common\",\n\t\t25\n\t],\n\t\"./ion-refresher_2.entry.js\": [\n\t\t\"nYbb\",\n\t\t\"common\",\n\t\t26\n\t],\n\t\"./ion-reorder_2.entry.js\": [\n\t\t\"smMY\",\n\t\t\"common\",\n\t\t27\n\t],\n\t\"./ion-ripple-effect.entry.js\": [\n\t\t\"STjf\",\n\t\t28\n\t],\n\t\"./ion-route_4.entry.js\": [\n\t\t\"k5eQ\",\n\t\t\"common\",\n\t\t29\n\t],\n\t\"./ion-searchbar.entry.js\": [\n\t\t\"OR5t\",\n\t\t\"common\",\n\t\t30\n\t],\n\t\"./ion-segment_2.entry.js\": [\n\t\t\"fSgp\",\n\t\t\"common\",\n\t\t31\n\t],\n\t\"./ion-select_3.entry.js\": [\n\t\t\"lfGF\",\n\t\t\"common\",\n\t\t32\n\t],\n\t\"./ion-slide_2.entry.js\": [\n\t\t\"5xYT\",\n\t\t33\n\t],\n\t\"./ion-spinner.entry.js\": [\n\t\t\"nI0H\",\n\t\t\"common\",\n\t\t34\n\t],\n\t\"./ion-split-pane.entry.js\": [\n\t\t\"NAQR\",\n\t\t35\n\t],\n\t\"./ion-tab-bar_2.entry.js\": [\n\t\t\"knkW\",\n\t\t\"common\",\n\t\t36\n\t],\n\t\"./ion-tab_2.entry.js\": [\n\t\t\"TpdJ\",\n\t\t\"common\",\n\t\t37\n\t],\n\t\"./ion-text.entry.js\": [\n\t\t\"ISmu\",\n\t\t\"common\",\n\t\t38\n\t],\n\t\"./ion-textarea.entry.js\": [\n\t\t\"U7LX\",\n\t\t\"common\",\n\t\t39\n\t],\n\t\"./ion-toast.entry.js\": [\n\t\t\"L3sA\",\n\t\t\"common\",\n\t\t40\n\t],\n\t\"./ion-toggle.entry.js\": [\n\t\t\"IUOf\",\n\t\t\"common\",\n\t\t41\n\t],\n\t\"./ion-virtual-scroll.entry.js\": [\n\t\t\"8Mb5\",\n\t\t42\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = \"kLfG\";\nmodule.exports = webpackAsyncContext;","import { Platform, AlertController } from \"@ionic/angular\";\nimport { Injectable } from \"@angular/core\";\nimport { HttpClient, HttpHeaders } from \"@angular/common/http\";\nimport { JwtHelperService } from \"@auth0/angular-jwt\";\nimport { Storage } from \"@ionic/storage\";\nimport { environment } from \"../../environments/environment\";\nimport { tap, catchError, map } from \"rxjs/operators\";\nimport { BehaviorSubject, from, of } from \"rxjs\";\nimport { Router } from \"@angular/router\";\nimport { LoadingController } from \"@ionic/angular\";\nimport { ToastController } from \"@ionic/angular\";\nimport { SMS } from \"@ionic-native/sms/ngx\";\nimport { NetworkService } from \"./network.service\";\nimport { LoaderService } from \"./loader.service\";\n\n// Declaro esta constante dentro de environment para que sea accesible desde otros modulos\nconst { TOKEN_KEY, USER_KEY } = environment.constants;\n\ninterface ApiValidResponse {\n  res: boolean;\n  message: string;\n}\n\n@Injectable({\n  providedIn: \"root\",\n})\nexport class AuthService {\n  url = environment.url;\n  usuario = \"\";\n  clave = \"\";\n  loading: HTMLIonLoadingElement;\n  reportes = [];\n  preguntas = [];\n  listos = [];\n  fecha = [];\n  hora = [];\n\n  authenticationState = new BehaviorSubject(false);\n\n  constructor(\n    private http: HttpClient,\n    private helper: JwtHelperService,\n    private storage: Storage,\n    private plt: Platform,\n    private alertController: AlertController,\n    private router: Router,\n    private loadingController: LoadingController,\n    private toastController: ToastController,\n    private sms: SMS,\n    private networkService: NetworkService,\n    private loaderService: LoaderService\n  ) {\n    this.init();\n  }\n\n  async init() {\n    await this.plt.ready();\n    await this.storage.create();\n    this.loading = await this.loadingController.create({\n      message: \"Cargando...\",\n    });\n    // // Si estamos en una ruta que no se login, mostramos loader, luego de resolver si el token es valido o no, el metodo checkToken quita el loader\n    // if (this.router.url !== \"/login\") {\n    //   await this.loading.present();\n    //   setTimeout(() => {\n    //     this.loading.dismiss();\n    //   }, 5000);\n    // }\n  }\n\n  // Este metodo se llama desde el guard de login, si no tenemos el token quiere decir que podemos entrar a la pagina del login\n  getToken() {\n    return from(this.storage.get(TOKEN_KEY)).pipe(\n      map((token) => {\n        if (!token) {\n          return true;\n        }\n        this.router.navigate([\"inside\"]);\n        return false;\n      }),\n      catchError((err) => {\n        console.log(\"Tuvimos error de token\", err);\n        throw new Error(err);\n      })\n    );\n  }\n\n  checkToken() {\n    // Muestra la splashscreen mientras hacemos la peticion\n    return this.http.get(`${this.url}/view`).pipe(\n      map((response: ApiValidResponse) => {\n        if (response.res) {\n          this.loading.dismiss();\n          return true;\n        }\n      }),\n      catchError((e) => {\n        this.loading.dismiss();\n        if (e.status === 401) {\n          this.storage.remove(TOKEN_KEY);\n          this.router.navigate([\"login\"]);\n        }\n        throw new Error(e);\n      })\n    );\n  }\n\n  checkReports() {\n    // Muestra la splashscreen mientras hacemos la peticion\n    return this.http.get(`${this.url}/reports`).pipe(\n      map((response: ApiValidResponse) => {\n        if (response.res) {\n          // Si es valida ocultamos la splashscreen\n          this.loading.dismiss();\n          return true;\n        }\n      }),\n      catchError((e) => {\n        console.log(\"Error en checkReports\");\n        this.loading.dismiss();\n        if (e.status === 401) {\n          this.storage.remove(TOKEN_KEY);\n          this.router.navigate([\"login\"]);\n        }\n        throw new Error(e);\n      })\n    );\n  }\n\n  register(credentials) {\n    return this.http.post(`${this.url}/login`, credentials).pipe(\n      catchError((e) => {\n        this.showAlert(e.error.msg);\n        throw new Error(e);\n      })\n    );\n  }\n\n  getUsername() {\n    return this.storage.get(USER_KEY);\n  }\n\n  async login(credentials) {\n    await this.loaderService.show();\n    return this.http\n      .post(`${this.url}/login`, credentials)\n      .pipe(\n        tap(async (result: ApiValidResponse) => {\n          if (result.res === false) {\n            this.loaderService.hide();\n            this.showAlert(\"Credenciales inválidas o fallo en la conexión\");\n            return;\n          }\n          // Recuerda que tambien puedes hacer result.token y escribes menos\n          this.storage.set(USER_KEY, credentials.usuario);\n          const TOKEN_NEW = this.storage.set(TOKEN_KEY, result[\"token\"]);\n          let toast = this.toastController.create({\n            message: \"Usuario autorizado!!\",\n            duration: 6000,\n          });\n          toast.then((toast) => toast.present());\n          this.router.navigate([\"tutorial\"]);\n          // Dejo esto comentado porque el token que devuelven no es un JWT.\n          // this.usuario = this.helper.decodeToken(result['token']);\n          this.loaderService.hide();\n          this.authenticationState.next(true);\n        }),\n        catchError(async (e) => {\n          this.loaderService.hide();\n          this.showAlert(\"Credenciales inválidas o fallo en la conexión\");\n          throw new Error(JSON.stringify(e));\n        })\n      )\n      .subscribe();\n  }\n\n  logout() {\n    this.loading.present();\n    return this.http.post(`${this.url}/logout`, {}).pipe(\n      tap((res) => {\n        console.log(res);\n        this.storage\n          .remove(TOKEN_KEY)\n          .then(() => {\n            this.router.navigate([\"login\"]);\n            this.authenticationState.next(false);\n            this.loading.dismiss();\n            return this.storage.remove(USER_KEY);\n          })\n          .then(() => {\n            console.log(\"Logout done!\");\n          });\n      }),\n      catchError((e) => {\n        this.loading.dismiss();\n        this.showAlert(e.error.msg);\n        throw new Error(e);\n      })\n    );\n  }\n\n  getSpecialData() {\n    // Este vendria siendo el metodo que necesitas aqui para verificar tu token\n    // No tienes que meter el header por cada request para autenticarla, el AuthInterceptor se encarga de poner el header si lo encuentra para cada request\n    return this.checkToken();\n  }\n\n  getReports() {\n    this.loading.present();\n    return this.http.get<any>(`${this.url}/reports`).pipe(\n      tap(() => {\n        let toast = this.toastController.create({\n          message: \"Reportes cargados\",\n          duration: 3000,\n        });\n        this.loading.dismiss();\n        toast.then((toast) => toast.present());\n      }),\n      map((response) => {\n        return response.reportes;\n      }),\n      catchError((e) => {\n        console.log(\"ERROR EN GET REPORTS\");\n        this.loading.dismiss();\n        this.showAlert(\"Error buscando reportes\");\n        throw new Error(e);\n      })\n    );\n  }\n\n  getReportsListos(id) {\n    this.loading.present();\n    return this.http.get<any>(`${this.url}/reportado?id=` + id).pipe(\n      tap(() => {\n        let toast = this.toastController.create({\n          message: \"Reportes cargados\",\n          duration: 3000,\n        });\n        this.loading.dismiss();\n        toast.then((toast) => toast.present());\n      }),\n      map((response) => {\n        return response.listos;\n      }),\n      catchError((e) => {\n        console.log(\"ERROR EN GET REPORTS LISTOS\");\n        this.loading.dismiss();\n        this.showAlert(\"Error buscando reportes\");\n        throw new Error(e);\n      })\n    );\n  }\n\n  getReportDetail(id) {\n    return this.http.get<any>(`${this.url}/preguntas?id=` + id).pipe(\n      tap(() => {\n        let toast = this.toastController.create({\n          message: \"Formulario cargado\",\n          duration: 3000,\n        });\n        toast.then((toast) => toast.present());\n      }),\n      map((response) => {\n        return response.preguntas;\n      }),\n      catchError((e) => {\n        console.log(\"ERROR EN REPORT DETAIL\");\n        this.loading.dismiss();\n        this.showAlert(e.error.msg);\n        throw new Error(e);\n      })\n    );\n  }\n\n  isAuthenticated() {\n    return this.authenticationState.value;\n  }\n\n  showAlert(msg) {\n    let alert = this.alertController.create({\n      message: msg,\n      header: \"Error\",\n      buttons: [\"OK\"],\n    });\n    alert.then((alert) => alert.present());\n  }\n\n  retryPostReporte({ reporteId }) {\n    console.log(\"Suscribimos??\");\n    const subscription = this.networkService.networkConnection$.subscribe(\n      async (connection) => {\n        console.log(\"El valor de connection es\", connection);\n        if (connection) {\n          const reporte = await this.storage.get(`reporte-${reporteId}`);\n          console.log(\"El reporte seria\", reporte);\n          console.log(\n            \"Enviamos porque volvio la conexion\",\n            \"el reporte id es\",\n            reporteId\n          );\n          this.postReporte(JSON.parse(reporte));\n          subscription.unsubscribe();\n        } else {\n          console.log(\"Dejamos de tenerla\");\n        }\n      }\n    );\n    return of(\"Esperamos conexion\");\n  }\n\n  sendReporte({ request, reporteId, msj }) {\n    console.log(\"Send reporte\", reporteId);\n    return this.http.post(`${this.url}/mensaje`, request).pipe(\n      tap((response) => {\n        let toast = this.toastController.create({\n          message: \"Reporte enviado correctamente\",\n          duration: 6000,\n        });\n        toast.then((toast) => toast.present());\n        this.router.navigate([\"inside\"]);\n        this.sms.send(\"04126230595\", msj);\n      }),\n      catchError((err) => {\n        console.log(\"ERROR EN SEND REPORTE\");\n        console.log(\"Tuvimos un error\", err);\n        alert(err.message);\n        throw new Error(err);\n      })\n    );\n  }\n\n  postReporte({ form, coords, reporteId }) {\n    const formMeta = Object.keys(form)\n      .filter((_, index) => +index < 2)\n      .map((key) => form[key]);\n    let [usuarioId, fechahora] = formMeta;\n    fechahora = fechahora.split(\" \");\n    let fecha = fechahora[0].split(\"/\");\n    let hora = fechahora[1].split(\":\");\n    let msj = `roae r${reporteId} i${usuarioId} h${hora[0]}${hora[1]}`;\n    const reportesSeleccion = [1, 3, 5];\n    const reportesUnicoValor = [2, 4];\n\n    // Este es para parsear del formulario con los checkbox\n    if (reportesSeleccion.includes(+reporteId)) {\n      const formData = Object.keys(form)\n        // Filtramos los primeros dos elementos que son usuarioId y hora\n        .filter((key, index) => +index > 1 && typeof form[key] === \"boolean\")\n        // Hacemos el indice id, asi evitamos usar la numeracion que viene de preguntas$\n        .map((key, index) => ({ id: index + 1, value: form[key] }));\n      // Filtramos las que sean falsas\n      const respuestas = formData\n        .filter((item) => item.value)\n        .map((item) => (item.id > 9 ? item.id : `0${item.id}`));\n      const respuestasString = respuestas.join(\"\");\n      msj = `${msj} s${respuestasString}`;\n    }\n\n    // Este es para parsear del formulario con una solo input\n    if (reportesUnicoValor.includes(+reporteId)) {\n      // Asumimos que el unico valor numerico en el formulario es el que estamos buscando\n      const key = Object.keys(form).find(\n        (key) => typeof form[key] === \"number\"\n      );\n      const value = form[key];\n      msj = `${msj} n${value}`;\n    }\n\n    const request = {\n      msj,\n      hora: `${hora[0]}${hora[1]}`,\n      fecha: `${fecha[2]}-${fecha[1]}-${fecha[0]}`,\n      fuenteid: \"1\",\n      tipomensajeid: \"1\",\n      cuestid: reporteId,\n      ...coords,\n    };\n\n    if (this.networkService.networkConnection$.value) {\n      return this.sendReporte({ request, reporteId, msj });\n    } else {\n      this.showAlert(\n        \"No se ha encontrado conexión a internet, abriremos la aplicación de mensajería en breves con el resultado de su formulario para enviar vía SMS\"\n      );\n      setTimeout(() => {\n        // Aquí tendrás que cambiar el numero por el que toca\n        this.openSms({ message: msj, number: \"04126230595\" });\n      }, 5000);\n    }\n  }\n\n  openSms({ message, number }) {\n    const link = document.createElement(\"a\");\n    link.href = `sms://${number}?body=${message}`;\n    link.click();\n    return of(true);\n  }\n}\n","import { AuthGuardService } from \"./guards/auth.guard\";\nimport { LoginGuardService } from \"./guards/login.guard\";\nimport { NgModule } from \"@angular/core\";\nimport { Routes, RouterModule } from \"@angular/router\";\n\nconst routes: Routes = [\n  {\n    path: \"\",\n    redirectTo: \"/login\",\n    pathMatch: \"full\",\n  },\n  //  { path: '', redirectTo: 'inside', pathMatch: 'full' },\n  {\n    path: \"login\",\n    loadChildren: () =>\n      import(\"./pages/login/login.module\").then((m) => m.LoginPageModule),\n    canActivate: [LoginGuardService],\n  },\n  {\n    path: \"inside\",\n    loadChildren: () =>\n      import(\"./pages/inside/inside.module\").then((m) => m.InsidePageModule),\n    canActivate: [AuthGuardService],\n  },\n  {\n    path: \"reporte/:id\",\n    loadChildren: () =>\n      import(\"./pages/reporte/reporte.module\").then((m) => m.ReportePageModule),\n    canActivate: [AuthGuardService],\n  },\n  {\n    path: \"tutorial\",\n    loadChildren: () =>\n      import(\"./pages/tutorial/tutorial.module\").then((m) => m.TutorialModule),\n    canActivate: [AuthGuardService],\n\n    //canLoad: [CheckTutorial]\n  },\n  {\n    path: \"about\",\n    loadChildren: () =>\n      import(\"./pages/about/about.module\").then((m) => m.AboutModule),\n    canActivate: [AuthGuardService],\n\n    //canLoad: [CheckTutorial]\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule],\n})\nexport class AppRoutingModule {}\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.log(err));\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"zn8P\";"]}